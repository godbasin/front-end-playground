(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{608:function(t,s,a){"use strict";a.r(s);var n=a(69),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("第四章主要介绍关节(joint)。")]),t._v(" "),a("h2",{attrs:{id:"关节-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关节-joint"}},[t._v("#")]),t._v(" 关节(joint)")]),t._v(" "),a("h3",{attrs:{id:"关于"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于"}},[t._v("#")]),t._v(" 关于")]),t._v(" "),a("p",[t._v("关节的作用是把物体约束到世界，或约束到其它物体上。在游戏中的典型例子是木偶，跷跷板和滑轮。关节可以用许多种不同的方法结合起来，创造出有趣的运动。")]),t._v(" "),a("p",[t._v("有些关节提供了限制(limit)，以便你控制运动范围。有些关节还提供了马达(motor)，它可以以指定的速度驱动关节，直到你指定了更大的力或扭矩。")]),t._v(" "),a("p",[t._v("关节马达有许多不同的用途。你可以使用关节来控制位置，只要提供一个与目标之距离成正比例的关节速度即可。你还可以模拟关节摩擦：将关节速度置零，并且提供一个小的、但有效的最大力或扭矩； 那么马达就会努力保持关节不动，直到负载变得过大。")]),t._v(" "),a("h3",{attrs:{id:"关节定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关节定义"}},[t._v("#")]),t._v(" 关节定义")]),t._v(" "),a("p",[t._v("各种关节类型都派生自 b2JointDef。所有关节都连接两个不同的物体，可能其中一个是静态物体。如果你想浪费内存的话，那就创建一个连接两个静态物体的关节。")]),t._v(" "),a("p",[t._v("你可以为任何一种关节指定用户数据。你还可以提供一个标记，用于预防相连的物体发生碰撞。实际上，这是默认行为，你可以设置 collideConnected 布尔值来允许相连的物体碰撞。")]),t._v(" "),a("p",[t._v("很多关节定义需要你提供一些几何数据。一个关节常常需要一个锚点(anchor point)来定义，这是固 定于相接物体中的点。在 Box2D 中这些点需要在局部坐标系中指定，这样，即便当前物体的变化违反了关节约束，关节还是可以被指定——在游戏存取进度时这经常会发生。另外，有些关节定义需要默认的物体之间的相对角度。这样才能通过关节限制或固定的相对角来正确地约束旋转。")]),t._v(" "),a("p",[t._v("初始化几何数据可能有些乏味。所以很多关节提供了初始化函数，消除了大部分工作。然而，这些初始化函数通常只应用于原型，在产品代码中应该直接地定义几何数据。这能使关节行为更加稳固。")]),t._v(" "),a("p",[t._v("其余的关节定义数据依赖于关节的类型。")]),t._v(" "),a("h2",{attrs:{id:"距离关节-distance-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#距离关节-distance-joint"}},[t._v("#")]),t._v(" 距离关节(distance-joint)")]),t._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("使用距离关节连接的两个物体上的选定的两个点之间的距离是常量，它限制了两个物体之间的距离，使它始终保持一个常量，就像自行车的两个轮子。")]),t._v(" "),a("h3",{attrs:{id:"b2distancejointdef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b2distancejointdef"}},[t._v("#")]),t._v(" b2DistanceJointDef")]),t._v(" "),a("p",[t._v("距离关节是最简单的关节之一，它描述了两个物体上的两个点之间的距离应该是常量。当你指定一个距离关节时，两个物体必须已在应有的位置上。\n随后，你指定两个世界坐标中的锚点 。第一个锚点连接到物体 1，第二个锚点连接到物体 2。这些点隐含了距离约束的长度。")]),t._v(" "),a("p",[t._v("首先创建两个物体，然后放到世界里，然后使用基类 b2DistanceJointDef 创建一个距离关节，连接它们。")]),t._v(" "),a("p",[t._v("每个距离关节都有两个锚点，分别赋予两个物体上某一点的坐标，这样子就使用一个距离关节将两个物体的选定点连起来。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Shape1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BoxDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个形状Shape1")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("density "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restitution "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" BodyDef1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BodyDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用Shape1创建一个物体BodyDef1")]),t._v("\nBodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("490")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddShape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Shape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBody1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将BodyDef1放到世界里")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Shape2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BoxDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("density "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restitution "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" BodyDef2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BodyDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("480")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddShape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Shape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBody2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefDistance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2DistanceJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个距离关节jointDefDistance")]),t._v("\njointDefDistance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//该关节一端连在Body1上")]),t._v("\njointDefDistance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//该关节另一端连在Body2上")]),t._v("\njointDefDistance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetCenterPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//关节和Body1的连接锚点是Body1的中心位置")]),t._v("\njointDefDistance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetCenterPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//关节和Body2的连接锚点是Body2的中心位置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDistance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefDistance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将距离关节jointDefDistance放入到世界中")]),t._v("\n")])])]),a("h2",{attrs:{id:"旋转关节-revolute-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#旋转关节-revolute-joint"}},[t._v("#")]),t._v(" 旋转关节(revolute-joint)")]),t._v(" "),a("h3",{attrs:{id:"说明-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-2"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("一个旋转关节会强制两个物体共享一个锚点，即铰接点。旋转关节只有一个自由度：两个物体的相对旋转。")]),t._v(" "),a("p",[t._v("旋转关节即相当于将两个物体用钉子钉在一起，两个物体都可以绕这颗钉子旋转。当然，如果其中一个物体为地面的话，就相当于将物体钉在地面上，物体都可以绕这颗钉子旋转。")]),t._v(" "),a("h3",{attrs:{id:"b2revolutejointdef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b2revolutejointdef"}},[t._v("#")]),t._v(" b2RevoluteJointDef")]),t._v(" "),a("p",[t._v("首先创建两个物体，然后将它们放在世界里，使用基类 b2RevoluteJointDef 创建一个旋转关节，设定铰接点，及旋转关节连接的是哪两个物体之后即可将其放入到世界里。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefRevolute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2RevoluteJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个旋转关节jointDefRevolute")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("450")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("450")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定铰接点坐标")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定旋转关节一端连接Body1")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定旋转关节另一端连接Body2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointRevolute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将旋转关节放入世界中")]),t._v("\njointRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetMotorSpeed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置旋转关节马达的速度")]),t._v("\n")])])]),a("h2",{attrs:{id:"移动关节-prismatic-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动关节-prismatic-joint"}},[t._v("#")]),t._v(" 移动关节(prismatic-joint)")]),t._v(" "),a("h3",{attrs:{id:"说明-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-3"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("移动关节允许两个物体沿指定轴相对移动，它会阻止相对旋转，简而言之，就是关节对物体的影响只体现在轴向方向。因此，移动关节只有一个自由度。")]),t._v(" "),a("p",[t._v("移动关节类似旋转关节，只是将旋转角度换成了平移。关节中的两个刚体的相对运动只能发生在其轴向上。")]),t._v(" "),a("h3",{attrs:{id:"b2prismaticjointdef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b2prismaticjointdef"}},[t._v("#")]),t._v(" b2PrismaticJointDef")]),t._v(" "),a("p",[t._v("首先创建两个物体，将其放入世界里，然后使用基类 b2PrismaticJointDef 创建一个移动关节，设置其各个参数，再将其放入到世界里即可。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefPrismatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2PrismaticJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个移动关节jointDefPrismatic")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("700")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("565")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一般选择两个锚点的中心点")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("axis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//两物体只沿轴向方向有相对运动")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//移动关节的一端连接到Body1上")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//移动关节的另一端连接到Body2上")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointPrismatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将设置好参数的移动关节放到世界里")]),t._v("\n")])])]),a("h2",{attrs:{id:"滑轮关节-pulley-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#滑轮关节-pulley-joint"}},[t._v("#")]),t._v(" 滑轮关节(pulley-joint)")]),t._v(" "),a("h3",{attrs:{id:"说明-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-4"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("滑轮关节用于模拟定滑轮或动滑轮，即由滑轮关节连接的两个物体就像由绳子和滑轮连在一起一样。")]),t._v(" "),a("p",[t._v("在此，简单介绍动滑轮的特点，使用动滑轮能省一半力，但是费距离。\n这是因为使用动滑轮时，物体由两段绳子吊着，每段绳子只承担钩码重的一半。使用动滑轮虽然省了力，但是动力移动的距离是钩码升高的距离的 2 倍，即费了距离。")]),t._v(" "),a("p",[t._v("一般可以简单地套用公式来计算 F 和 G 的关系：\n"),a("code",[t._v("F=(G+G动滑轮）/n")]),t._v("\n对于滑轮组，n 代表接在动滑轮上的绳子的段数，而比例系数 ratio 即是 n。")]),t._v(" "),a("h3",{attrs:{id:"b2pulleyjointdef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b2pulleyjointdef"}},[t._v("#")]),t._v(" b2PulleyJointDef")]),t._v(" "),a("p",[t._v("创建好物体之后，用基类 b2PulleyJointDef 创建一个滑轮关节，然后分别设置其连接的是哪两个物体及其锚点，连接绳子顶点，两物体绳子最大长度及比例系数等参数即可。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefPulley "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2PulleyJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个滑轮关节jointDefPulley")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//滑轮关节的一端连接在Body1上")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//滑轮关节的另一端连接在Body2上")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetCenterPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//滑轮关节与Body1的连接点是Body1的中心位置")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetCenterPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//滑轮关节与Body2的连接点是Body2的中心位置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" groundPoint1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2Vec2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("850")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("345")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" groundPoint2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2Vec2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("950")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("365")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groundPoint1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" groundPoint1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groundPoint2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" groundPoint2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用b2Vec2创建两个矢量，然后赋值给groundPoint，设定两段绳子的顶点")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxLength1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxLength2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定滑轮两侧的绳子的最大长度")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这两个maxLength至少有一个要大于|groundPoint-anchorPoint|   jointDefPulley.ratio=1;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定滑轮关节的比例系数，body1上下移动S，body2上下移动S/ratio，当ratio不等于1时，即模拟有动滑轮的情况")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointPulley "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefPulley"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将滑轮关节放到世界内")]),t._v("\n")])])]),a("h2",{attrs:{id:"齿轮关节-gear-joint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#齿轮关节-gear-joint"}},[t._v("#")]),t._v(" 齿轮关节(gear-joint)")]),t._v(" "),a("h3",{attrs:{id:"说明-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-5"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("齿轮关节需要两个被旋转关节或移动关节接地(ground)的物体，可以任意组合这些关节类型。")]),t._v(" "),a("h3",{attrs:{id:"b2pulleyjointdef-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b2pulleyjointdef-2"}},[t._v("#")]),t._v(" b2PulleyJointDef")]),t._v(" "),a("p",[t._v("另外，创建旋转或移动关节时，Box2D 需要地(ground)作为 body1。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Shape1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BoxDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//也可以是圆形或者多边形刚体")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("density "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restitution "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" BodyDef1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BodyDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("950")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("450")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddShape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Shape1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBody1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BodyDef1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefRevolute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2RevoluteJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个旋转关节")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("950")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("450")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetGroundBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用作齿轮关节的旋转关节body1须为GroundBody")]),t._v("\njointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将旋转关节另外一个物体设为Body1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointRevolute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将旋转关节放入世界中")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Shape2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BoxDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("density "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restitution "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nShape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" BodyDef2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2BodyDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("950")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("530")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddShape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Shape2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nBody2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BodyDef2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefPrismatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2PrismaticJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个移动关节")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anchorPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("950")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("565")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("axis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在齿轮关节中，这个轴只要设置成平行于屏幕就行，也就是说随着齿轮旋转，移动关节可以上下、左右来回运动，（斜向运动会出现bug）")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetGroundBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用作移动关节的移动关节body1须为GroundBody")]),t._v("\njointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//移动关节的另外一个物体设置为Body2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointPrismatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将移动关节放入到世界中")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointDefGear "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("b2GearJointDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用基类b2GearJointDef创建一个齿轮关节")]),t._v("\njointDefGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Body2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置齿轮关节连接的两个物体分别是Body1和Body2")]),t._v("\njointDefGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("joint1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jointRevolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njointDefGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("joint2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jointPrismatic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" jointGear "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateJoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jointDefGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将齿轮关节放入到世界中")]),t._v("\njointGear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m_ratio "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设定比例系数，ratio=转动圈数/移动距离")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);